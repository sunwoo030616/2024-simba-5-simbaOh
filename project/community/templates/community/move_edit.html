{% extends 'base_with_nav.html' %} {% load static %} {% block content %}

<link
  rel="stylesheet"
  type="text/css"
  href="{% static 'css/community/new_free.css'%}"
/>

<form id="form" action="{% url 'community:move-update' move.id %}" method="POST" enctype="multipart/form-data">
  {% csrf_token %}
  <div class="screen">
    <div class="main">
      <div class="body">
        <div class="nav">
          <div class="left" style="z-index: 1;">
            <a href="{% url 'community:move-board' %}">
              <img src="{% static 'images/arrow-24.png' %}" width='32px' height='32px'>
            </a>
          </div>
          <p class="color_28 title_text" style="text-align: center;">ì»¤ë®¤ë‹ˆí‹° ê¸€ ìˆ˜ì •</p>
          <div style="width: 32px;"></div>
        </div>
        
        <div class="border1 row1">
          <p class="title_text2 color_00">ê²Œì‹œíŒ êµ¬ë¶„</p>
          <div class="row">
            <p class="unselect_point">ììœ ê²Œì‹œíŒ</p>
            <p class="select_point">ì´ì§ê²Œì‹œíŒ</p>
          </div>
        </div>
        <div class="border2">
            <div class="row2">
              <div class="color_17 title_text2">ì´ëª¨ì§€ì„ íƒ</div>
              <p class="color_DB">*</p>
            </div>
            <button class="btn_select" type="button" onclick="toggleEmojiDrawer()">
              <input style="font-size: 30px;" id="input" type="text" value="{{ move.emoji }}" placeholder="ğŸ˜€" size="1" readonly>
            </button>
            <div id="drawer" class="emoji-drawer hidden">
              <div class="emoji" onclick="addEmoji(this.innerHTML)">ğŸ˜</div>
              <div class="emoji" onclick="addEmoji(this.innerHTML)">ğŸ˜‚</div>
              <div class="emoji" onclick="addEmoji(this.innerHTML)">ğŸ¤©</div>
              <div class="emoji" onclick="addEmoji(this.innerHTML)">ğŸ¤”</div>
              <div class="emoji" onclick="addEmoji(this.innerHTML)">ğŸ˜¥</div>
              <div class="emoji" onclick="addEmoji(this.innerHTML)">ğŸ˜´</div>
              <div class="emoji" onclick="addEmoji(this.innerHTML)">ğŸ« </div>
              <div class="emoji" onclick="addEmoji(this.innerHTML)">ğŸ¤‘</div>
              <div class="emoji" onclick="addEmoji(this.innerHTML)">ğŸ˜¤</div>
              <div class="emoji" onclick="addEmoji(this.innerHTML)">ğŸ˜­</div>
              <div class="emoji" onclick="addEmoji(this.innerHTML)">ğŸ¤¯</div>
              <div class="emoji" onclick="addEmoji(this.innerHTML)">ğŸ˜±</div>
              <div class="emoji" onclick="addEmoji(this.innerHTML)">ğŸ˜‡</div>
              <div class="emoji" onclick="addEmoji(this.innerHTML)">ğŸ‘€</div>
              <div class="emoji" onclick="addEmoji(this.innerHTML)">ğŸ™</div>
              <div class="emoji" onclick="addEmoji(this.innerHTML)">ğŸ’ª</div>
              <div class="emoji" onclick="addEmoji(this.innerHTML)">ğŸ‘</div>
              <div class="emoji" onclick="addEmoji(this.innerHTML)">ğŸ™Œ</div>
              <div class="emoji" onclick="addEmoji(this.innerHTML)">ğŸ‰</div>
              <div class="emoji" onclick="addEmoji(this.innerHTML)">âœ¨</div>
              <div class="emoji" onclick="addEmoji(this.innerHTML)">ğŸ“¢</div>
            </div>
            <input type="hidden " id="emoji" name="emoji"> <!-- ìˆ¨ê²¨ì§„ ì…ë ¥ í•„ë“œ -->
          </div>
          <div class="row2 mar">
            <div class="color_17 title_text2">ì œëª©</div>
            <p class="color_DB">*</p>
          </div>
          <input class="mar bot_border" type="text" name="title" value="{{ move.title }}" placeholder="ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”." required>
          <div class="row2 mar">
            <div class="color_17 title_text2">ë‚´ìš©</div>
            <p class="color_DB">*</p>
          </div>
          <select class="mar bot_border" id="field" name="field" value="{{ move.field }}" placeholder="ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”." required>
            <option value="ì¸ì‚¬/ë…¸ë¬´">ì¸ì‚¬/ë…¸ë¬´</option>
            <option value="ITê°œë°œ/ë°ì´í„°">ITê°œë°œ/ë°ì´í„°</option>
            <option value="ë””ìì¸">ë””ìì¸</option>
            <option value="ì˜ì—…/íŒë§¤/ë¬´ì—­">ì˜ì—…/íŒë§¤/ë¬´ì—­</option>
            <option value="ìƒí’ˆ/MD">ìƒí’ˆ/MD</option>
            <option value="ì„œë¹„ìŠ¤">ì„œë¹„ìŠ¤</option>
            <option value="ìƒì‚°">ìƒì‚°</option>
            <option value="ì˜ë£Œ">ì˜ë£Œ</option>
            <option value="ê±´ì„¤/ê±´ì¶•">ê±´ì„¤/ê±´ì¶•</option>
            <option value="ì—°êµ¬/R&D">ì—°êµ¬/R&D</option>
            <option value="êµìœ¡">êµìœ¡</option>
            <option value="ê¸ˆìœµ/ë³´í—˜">ê¸ˆìœµ/ë³´í—˜</option>
            <option value="ë¯¸ë””ì–´/ìŠ¤í¬ì¸ ">ë¯¸ë””ì–´/ìŠ¤í¬ì¸ </option>
            <option value="ê¸°íš">ê¸°íš</option>
          </select>
          <div class="row2 mar">
            <div class="color_17 title_text2">ë¶„ì•¼</div>
            <p class="color_DB">*</p>
          </div>
          <input class="mar bot_border" id="content" name="content" value="{{ move.content }}" placeholder="ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”." required></input>
          <div class="row2 mar">
            <div class="color_17 title_text2">íƒœê·¸</div>
            <p class="color_DB">*</p>
          </div>
          <input class='tag mar bot_border' type="text" name="ftcontent" value="{{ move.ftcontent }}" placeholder="#íƒœê·¸" required/>

        </div>
        <button id="btn_edit" type="button" class="btn_submit">ìˆ˜ì •ì™„ë£Œ</button>
      </div>
    </div>
    <div class="wrapping" id="wrapping"></div>
    <div class="toast" id="toast" style="align-items: center;">
      <img src="{% static 'images/complete.png' %}" width="90px" height="90px">
      <p class="color_28 title_text2">ìˆ˜ì •ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.</p>
    </div>
  </div>
</form>  



<script>

  function toggleEmojiDrawer() {
    var drawer = document.getElementById('drawer');
    drawer.classList.toggle('hidden');
  }

  function addEmoji(emoji) {
    var input = document.getElementById('input');
    var hiddenEmojiInput = document.getElementById('emoji');
    input.value = emoji;
    hiddenEmojiInput.value = emoji;
    toggleEmojiDrawer();
  }

  function select_Emoji() {
    let drawer = document.getElementById('drawer');
  
    if (drawer.classList.contains('hidden')) {
      drawer.classList.remove('hidden');
    } else {
      drawer.classList.add('hidden');
    }
  }
  document.addEventListener("DOMContentLoaded", function() {
    const wrapping = document.getElementById("wrapping");
    const toast = document.getElementById("toast");
    const btn_edit = document.getElementById("btn_edit");
    const form = document.getElementById("form");

    wrapping.style.display = "none";
    toast.style.display = "none";

    btn_edit.onclick = function (event) {
      event.preventDefault();

      wrapping.style.display = "block";
      toast.style.display = "";
      setTimeout(function() {
        form.submit();
      }, 500);
    };


    let emojis = document.querySelectorAll('.emoji');
    emojis.forEach(emoji => {
      emoji.addEventListener('click', function() {
        addEmoji(emoji.innerHTML);
        document.getElementById('drawer').classList.add('hidden');
      });
    });

    document.getElementById('drawer').classList.add('hidden');
  });
</script>

{% endblock %}



<form action="{% url 'community:free-create' %}" method="POST" enctype="multipart/form-data">
  {% csrf_token %}
  <p>ì œëª© : <input type="text" name="title"></p>
  <p>ì‚¬ì§„ : <input type="file" name="image"></p>
  <p>ë‚´ìš© : <textarea id="content" name="content" required></textarea><br><br>
  <button type="submit">ì œì¶œ</button>
</form>

<form action="{% url 'community:free-update' free.id %}" method="POST" enctype="multipart/form-data">
  {% csrf_token %}
  <div class="screen">
    <div class="main">
      <div class="body">
        <div class="nav">
          <div class="left" style="z-index: 1;">
            <a href="{% url 'community:free-board' %}">
              <img src="{% static 'images/arrow-24.png' %}" width='32px' height='32px'>
            </a>
          </div>
          <p class="color_28 title_text" style="text-align: center;">ì»¤ë®¤ë‹ˆí‹° ì‘ì„±</p>
          <div style="width: 32px;"></div>
        </div>
        <div class="border1 row1">
          <p class="title_text2 color_00">ê²Œì‹œíŒ êµ¬ë¶„</p>
          <div class="row">
            <a class="select_point" href="{% url 'community:new-free' %}">ììœ ê²Œì‹œíŒ</a>
            <a href="{% url 'community:new-move' %}">ì´ì§ê²Œì‹œíŒ</a>
          </div>
        </div>
        

    <p>ì œëª© : <input type="text" name="title" value="{{free.title}}"></p>
    {% if free.image %}
        <p><img src="{{ free.image.url }}" alt="ì‚¬ì§„" width="100px"></p>
    {% endif %}
    <p>ì‚¬ì§„ : <input type="file" name="image"></p>
    <!-- ë‚˜ë¨¸ì§€ ë³€ìˆ˜ë“¤ë„ ë‹¤ free. ì´ëŸ°ì‹ì„ free.emoji/ free.freetag -->
    
    <p>ë‚´ìš© : <textarea type="text" name="content" id="" cols="30" rows="10">{{free.content}}</textarea></p>
    <button type="submit">ì œì¶œ</button>
</form>



<h2>ìˆ˜ì •ì¤‘...</h2>
<form action="{% url 'community:move-update' move.id %}" method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    <p>ì œëª© : <input type="text" name="title" value="{{move.title}}"></p>
    {% if move.image %}
        <p><img src="{{ move.image.url }}" alt="ì‚¬ì§„" width="100px"></p>
    {% endif %}
    <p>ì‚¬ì§„ : <input type="file" name="image"></p>
    
    <p>ë‚´ìš© : <textarea type="text" name="content" id="" cols="30" rows="10">{{move.content}}</textarea></p>
    <button type="submit">ì œì¶œ</button>
</form><!-- ë‚˜ë¨¸ì§€ ë³€ìˆ˜ë“¤ë„ ë‹¤ move. ì´ëŸ°ì‹ì„ move.emoji/ move.movetag -->
    